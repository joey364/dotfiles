module.exports=function(e){var t={};function r(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=require("vscode")},function(e,t,r){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.BemHelper=t.ClassNameCases=void 0,function(e){e.Any="any",e.Kebab="kebab",e.Snake="snake",e.Camel="camel",e.Pascal="pascal",e.ShoutingSnake="shoutingSnake"}(s=t.ClassNameCases||(t.ClassNameCases={}));t.BemHelper=class{constructor(){this.elementSeparator="__",this.modifierSeparator="--",this.classPropertyValueRegex=/[\s]+class(Name)?=["'`]{1}([^"'`])+["'`]{1}/g,this.classNameRegex=/["'`]{1}(.*)["'`]{1}/,this.ignoredParentClasses=[],this.languageProviders=[],this.classNameProviders=[]}generateStyleSheet(e,t){this.resetRegex();let r="",s={};return e.forEach(e=>{if(t)r=`${r}.${e}{}`;else{let t=e.split(this.elementSeparator)[0].split(this.modifierSeparator)[0],r=e.split(this.elementSeparator)[1]?e.split(this.elementSeparator)[1].split(this.modifierSeparator)[0]:null,a=e.split(this.modifierSeparator)[1];t&&(s.hasOwnProperty(t)||(s[t]={},s[t].__BLOCK__MODIFIER__=[]),r&&!s[t].hasOwnProperty(r)&&(s[t][r]=[]),a&&(r?s[t][r].includes(a)||s[t][r].push(a):s[t].__BLOCK__MODIFIER__.push(a)))}}),t||Object.keys(s).forEach(e=>{r=`${r}.${e}{`,Object.keys(s[e]).filter(e=>"__BLOCK__MODIFIER__"!==e).forEach(t=>{r=`${r}&${this.elementSeparator}${t}{`,s[e][t].forEach(e=>{r=`${r}&${this.modifierSeparator}${e}{}`}),r+="}"}),s[e].__BLOCK__MODIFIER__.forEach(e=>{r=`${r}&${this.modifierSeparator}${e}{}`}),r+="}"}),r}getClasses(e,t,r){this.resetRegex();let s=[];if(this.languageProviders.filter(e=>!t||e.languages.includes(t)).flatMap(e=>e.htmlIgnorePatterns).forEach(t=>{e=e.replace(t," ")}),null===this.classPropertyValueRegex)return s;let a;for(;a=this.classPropertyValueRegex.exec(e);){let e=this.classNameRegex.exec(a[0]);if(null===e||e.length<2)return s;e[1].split(" ").forEach(e=>{""!==e&&-1===s.indexOf(e)&&s.push(e)})}return r?s.flatMap(e=>e.split(this.elementSeparator).flatMap(e=>e.split(this.modifierSeparator))):s}getPrecedingClassName(e,t,r,s,a){let i=this.getClasses(e,a).filter(e=>!this.ignoredParentClasses.includes(e));if(r||(r="explicit-only"),"first-parent"===r){const e=i.pop();if(!e)return;return e.split(this.elementSeparator)[0]}if("prefer-explicit"===r){const r=this.getPrecedingClassName(e,t,"first-parent",!1,a);return this.getPrecedingClassName(e,t,"explicit-only",!1,a)||r}let o=t?i:i.filter(e=>!e.includes(this.elementSeparator));return o=s?o:o.filter(e=>!e.includes(this.modifierSeparator)),o.pop()}getClassCaseType(e){return this.resetRegex(),e=e.replace(this.elementSeparator,"").replace(this.modifierSeparator,""),this.classNameProviders.forEach(t=>{if(e.match(t.nameMatchRegex))return t.name}),s.Any}createClass(e){let t="";return t=e.element&&e.modifier?`${e.block}${this.elementSeparator}${e.element}${this.modifierSeparator}${e.modifier}`:!e.element&&e.modifier?`${e.block}${this.modifierSeparator}${e.modifier}`:e.element&&!e.modifier?`${e.block}${this.elementSeparator}${e.element}`:e.block,t}convertStringToCase(e,t){var r;this.resetRegex();let s=e,a=e.replace(/-/g," ").replace(/_/g," ").split("").map(e=>e.match(/^[A-Z]$/)?" "+e:e).join("").toLowerCase().trim().split(" ").filter(e=>e);const i=null===(r=this.classNameProviders.find(e=>e.name===t))||void 0===r?void 0:r.convertWordsToClassName;return i&&(s=i(a)),s}convertClass(e,t){this.resetRegex();let r=e.includes(this.modifierSeparator)?e.split(this.modifierSeparator)[e.split(this.modifierSeparator).length-1]:"",s=e.includes(this.elementSeparator)?e.split(this.elementSeparator)[e.split(this.elementSeparator).length-1].split(this.modifierSeparator)[0]:"",a=e.split(this.elementSeparator)[0],i={block:this.convertStringToCase(a,t),element:this.convertStringToCase(s,t),modifier:this.convertStringToCase(r,t)};return this.createClass(i)}isBemClass(e){return!(!this.modifierSeparator.includes(this.elementSeparator)&&!this.elementSeparator.includes(this.modifierSeparator))||!(e.split(this.elementSeparator).length>2||e.split(this.modifierSeparator).length>3)}isCaseMatch(e,t){this.resetRegex(),e=this.elementSeparator.length>this.modifierSeparator.length?e.replace(this.elementSeparator,"").replace(this.modifierSeparator,""):e.replace(this.modifierSeparator,"").replace(this.elementSeparator,"");const r=this.classNameProviders.find(e=>e.name===t);return!!r&&!!e.match(r.nameMatchRegex)}getClassPropertyWord(e){let t="class";return this.languageProviders.forEach(r=>{r.languages.includes(e)&&(t=r.classAttributeLabel)}),t}registerLanguageProvider(e,t){if(0!==this.languageProviders.filter(t=>t.languages===e.languages).length&&t)throw new Error("Cannot register duplicate language provider for language: "+e.languages);this.languageProviders.push(e)}registerClassNameProvider(e){this.classNameProviders.push(e)}resetRegex(){this.classPropertyValueRegex.lastIndex=0,this.classNameProviders.forEach(e=>{e.nameMatchRegex.lastIndex=0}),this.classNameRegex.lastIndex=0}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigValue=void 0;const s=r(0);t.getConfigValue=function(e,t){let r=s.workspace.getConfiguration().get(e);return void 0!==r?r:t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const s=r(0),a=r(4),i=r(5),o=r(6),n=r(2),l=r(1),c=r(7),d=r(8),m=new l.BemHelper;c.defaultLanguageProviders.forEach(e=>m.registerLanguageProvider(e)),d.defaultClassNameProviders.forEach(e=>m.registerClassNameProvider(e));const u=new i.BemHelperCodeActionsProvider(m);function p(e){!function(e){const t=new a.BemCommandProvider(m);let r=n.getConfigValue("bemHelper.elementSeparator","__"),i=n.getConfigValue("bemHelper.modifierSeparator","--");t.setBemSeparators(r,i),e.subscriptions.push(s.commands.registerCommand("extension.bemHelper.insertModifiedElement",()=>{t.insertElementAtCursor(!0)}),s.commands.registerCommand("extension.bemHelper.insertElement",()=>{t.insertElementAtCursor(!1)}),s.commands.registerCommand("extension.bemHelper.generateStyleSheet",()=>{t.generateStyleSheetForCurrentDocument()}),s.commands.registerCommand("extension.bemHelper.generateStyleSheetFromSelection",()=>{t.generateStyleSheetForSelection()}),s.commands.registerCommand("extension.bemHelper.convertSelectionToCase",()=>{t.convertSelectionToCase()}))}(e),function(e){const t=new o.BemDiagnosticProvider(m),r=s.languages.createDiagnosticCollection(t.diagnosticCollectionName);s.window.activeTextEditor&&(t.updateDiagnostics(s.window.activeTextEditor.document,r),i.BemHelperCodeActionsProvider.diagnostics=t.errors);e.subscriptions.push(s.workspace.onDidSaveTextDocument(e=>{t.updateDiagnostics(e,r),i.BemHelperCodeActionsProvider.diagnostics=t.errors}),s.workspace.onDidOpenTextDocument(e=>{t.updateDiagnostics(e,r),i.BemHelperCodeActionsProvider.diagnostics=t.errors}),s.window.onDidChangeActiveTextEditor(e=>{e&&t.updateDiagnostics(e.document,r),i.BemHelperCodeActionsProvider.diagnostics=t.errors})),n.getConfigValue("bemHelper.responsiveLinting",!1)&&e.subscriptions.push(s.workspace.onDidChangeTextDocument(e=>{e&&(t.updateDiagnostics(e.document,r),i.BemHelperCodeActionsProvider.diagnostics=t.errors)}))}(e),function(e){e.subscriptions.push(s.languages.registerCodeActionsProvider("*",u,{providedCodeActionKinds:i.BemHelperCodeActionsProvider.providedCodeActionKinds}))}(e)}t.activate=p,t.deactivate=function(){},t.activate=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BemCommandProvider=void 0;const s=r(0),a=r(1),i=r(2);t.BemCommandProvider=class{constructor(e){this.bemHelper=e}setBemSeparators(e,t){this.bemHelper.elementSeparator=e,this.bemHelper.modifierSeparator=t}convertSelectionToCase(){let e=s.window.activeTextEditor;e?s.window.showQuickPick([a.ClassNameCases.Kebab.valueOf(),a.ClassNameCases.Snake.valueOf(),a.ClassNameCases.Pascal.valueOf(),a.ClassNameCases.Camel.valueOf(),a.ClassNameCases.ShoutingSnake.valueOf()],{placeHolder:"Choose a class case"}).then(t=>{if(!t)return void s.window.showErrorMessage("No class case selected.");if(!e)return;let r=e.document.getText(e.selection),a=this.bemHelper.convertClass(r,t);e.insertSnippet(new s.SnippetString(""+a))}):s.window.showErrorMessage("No active text editor. Please open a file")}generateStyleSheetForCurrentDocument(){let e=s.window.activeTextEditor;if(!e)return void s.window.showErrorMessage("No active text editor. Please open a file");let t=e.document.getText();this.generateStyleSheetForText(t)}generateStyleSheetForSelection(){let e=s.window.activeTextEditor,t=e.document.getText(e.selection);e?this.generateStyleSheetForText(t):s.window.showErrorMessage("No active text editor. Please open a file")}generateStyleSheetForText(e){s.window.showQuickPick(["scss","less","css"],{placeHolder:"Choose a type of stylesheet to generate"}).then(t=>{if(!t)return void s.window.showErrorMessage("No stylesheet type selected.");let r=s.window.setStatusBarMessage(`Generating ${t}...`),a=this.bemHelper.getClasses(e);if(!a)return;i.getConfigValue("bemHelper.sortGeneratedStylesheets",!1)&&(a=a.sort());let o=this.bemHelper.generateStyleSheet(a,"css"===t);s.workspace.openTextDocument({language:t,content:o}).then(e=>{s.window.showTextDocument(e).then(()=>{s.commands.executeCommand("editor.action.formatDocument")}).then(r.dispose())})})}insertElementAtCursor(e){let t=s.window.activeTextEditor;const r=i.getConfigValue("bemHelper.blockSelectionMode","prefer-explicit");if(this.bemHelper.ignoredParentClasses=i.getConfigValue("bemHelper.ignoreClassNames",["material-icons"]),void 0===t)return void s.window.showErrorMessage("No active text editor. Please open a file");const a=t.document.languageId;let o=this.bemHelper.getPrecedingClassName(t.document.getText(new s.Range(0,0,t.selection.active.line,t.selection.active.character)),!1,r,!1,a);if(null===o)return void s.window.showErrorMessage("Could not find any classes in current file.");let n=this.bemHelper.getClassPropertyWord(t.document.languageId),l="";const c=i.getConfigValue("bemHelper.newLineAfterInsert",!0);l=e?`<\${3:div} ${n}="${o}${this.bemHelper.elementSeparator}$1 ${o}${this.bemHelper.elementSeparator}$1${this.bemHelper.modifierSeparator}$2">$4</$3>${c?"\n":""}$0`:`<\${2:div} ${n}="${o}${this.bemHelper.elementSeparator}$1">$3</$2>${c?"\n":""}$0`,t.insertSnippet(new s.SnippetString(l))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BemHelperCodeActionsProvider=void 0;const s=r(0),a=r(1),i=r(2);class o{constructor(e){this.bemHelper=e}provideQuickFixes(e,t){let r=[];if(!this.isQuickFixable(e))return r;let s=t.getText(e.range);if("depth"===e.code)return r;if("case"===e.code){let o=i.getConfigValue("bemHelper.classNameCase",a.ClassNameCases.Any);if(o===a.ClassNameCases.Any)return r;r.push(this.createFix(t,e.range,this.bemHelper.convertClass(s,o),s.length))}return r}isQuickFixable(e){return!0}provideCodeActions(e,t){let r=[];return o.diagnostics.forEach(s=>{if(t.contains(s.range)){let t=this.provideQuickFixes(s,e);r=r.concat(...t)}}),r}createFix(e,t,r,a){const i=new s.CodeAction("Convert to "+r,s.CodeActionKind.QuickFix);return i.edit=new s.WorkspaceEdit,i.edit.replace(e.uri,new s.Range(t.start,t.start.translate(0,a)),r),i}}t.BemHelperCodeActionsProvider=o,o.providedCodeActionKinds=[s.CodeActionKind.QuickFix],o.diagnostics=[]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BemDiagnosticProvider=void 0;const s=r(0),a=r(1),i=r(2);t.BemDiagnosticProvider=class{constructor(e){this.diagnosticCollectionName="BemHelper",this.errors=[],this.bemHelper=e;let t=i.getConfigValue("bemHelper.elementSeparator","__"),r=i.getConfigValue("bemHelper.modifierSeparator","--");this.bemHelper.elementSeparator=t,this.bemHelper.modifierSeparator=r}getClassNameDepthProblems(e,t){let r=[],a=this.bemHelper.getClasses(e);return a?(a.forEach(a=>{if(!this.bemHelper.isBemClass(a)){let i=-1;if(""===a)return;for(;-1!==(i=e.indexOf(a,i+1))&&e.length>=i;){const e=t.document.positionAt(i),o=t.document.positionAt(i+a.length);r.push({code:"depth",message:"BEM - classes must only consist of block and element.",range:new s.Range(e,o),severity:s.DiagnosticSeverity.Warning,source:"bem helper",relatedInformation:[new s.DiagnosticRelatedInformation(new s.Location(t.document.uri,new s.Range(new s.Position(e.line,e.character),new s.Position(o.line,o.character))),""+a)]})}}}),r):r}getClassNameCaseProblems(e,t,r,a){let i=[],o=this.bemHelper.getClasses(e,void 0,!0);if(!o)return i;for(const n of o){if(i.length>=a)break;if(r.find(e=>this.bemHelper.isCaseMatch(n,e)))continue;let o=-1;if(""===n)return[];for(;-1!==(o=e.indexOf(n,o+1))&&e.length>=o;){const e=t.document.positionAt(o),a=t.document.positionAt(o+n.length);let l=new s.Range(new s.Position(e.line,0),new s.Position(e.line,1e3));t.document.getText(l).match(this.bemHelper.classPropertyValueRegex)&&i.push({code:"case",message:`BEM - Class names must be in ${r.join(" or ")} case`,range:new s.Range(e,a),severity:s.DiagnosticSeverity.Warning,source:"bem helper",relatedInformation:[new s.DiagnosticRelatedInformation(new s.Location(t.document.uri,new s.Range(new s.Position(e.line,e.character),new s.Position(a.line,a.character))),""+n)]})}}return i.slice(0,a)}updateDiagnostics(e,t){var r;let o=s.window.activeTextEditor;if(void 0===o)return;let n=i.getConfigValue("bemHelper.maxWarningsCount",100);const l=e.getText();let c=new Array;i.getConfigValue("bemHelper.showDepthWarnings",!1)&&(c=c.concat(this.getClassNameDepthProblems(l,o)));const d=s.workspace.getConfiguration().get("bemHelper.classNameCase"),m=null!==(r=null==d?void 0:d.split(",").map(e=>e).filter(e=>e))&&void 0!==r?r:[a.ClassNameCases.Any];m.includes(a.ClassNameCases.Any)||(c=c.concat(this.getClassNameCaseProblems(l,o,m,n))),c.length>0?t.set(e.uri,c):t.clear(),this.errors=c}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLanguageProviders=t.RazorLanguageProvider=t.PhpLanguageProvider=t.JavascriptReactLanguageProvider=t.TypescriptReactLanguageProvider=t.HtmlLanguageProvider=void 0;class s{constructor(){this.languages=["html"],this.classAttributeLabel="class",this.htmlIgnorePatterns=[]}}t.HtmlLanguageProvider=s;class a{constructor(){this.languages=["typescriptreact"],this.classAttributeLabel="className",this.htmlIgnorePatterns=[/\${.*}/g]}}t.TypescriptReactLanguageProvider=a;class i{constructor(){this.languages=["javascriptreact"],this.classAttributeLabel="className",this.htmlIgnorePatterns=[/\${.*}/g]}}t.JavascriptReactLanguageProvider=i;class o{constructor(){this.languages=["php"],this.classAttributeLabel="class",this.htmlIgnorePatterns=[/<\?php\s+.*\?>/g]}}t.PhpLanguageProvider=o;class n{constructor(){this.languages=["razor","cshtml","aspnetcorerazor"],this.classAttributeLabel="class",this.htmlIgnorePatterns=[/[\w\d-_]*@((\(.*\))|([\w\d-_]+))[\s]?/g]}}t.RazorLanguageProvider=n,t.defaultLanguageProviders=[new s,new n,new i,new o,new a]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultClassNameProviders=t.AnyCase=t.PascalCase=t.CamelCase=t.ShoutingSnakeCase=t.SnakeCase=t.KebabCase=void 0;class s{constructor(){this.nameMatchRegex=/^[a-z0-9-]+$/,this.name="kebab",this.convertWordsToClassName=e=>e.join("-")}}t.KebabCase=s;class a{constructor(){this.nameMatchRegex=/^[a-z0-9_]+$/,this.name="snake",this.convertWordsToClassName=e=>e.join("_")}}t.SnakeCase=a;class i{constructor(){this.nameMatchRegex=/^[A-Z0-9_]+$/,this.name="shoutingSnake",this.convertWordsToClassName=e=>e.join("_").toUpperCase()}}t.ShoutingSnakeCase=i;class o{constructor(){this.nameMatchRegex=/^[a-z]{1}[a-zA-Z0-9]+$/,this.name="camel",this.convertWordsToClassName=e=>e.map((e,t)=>0===t?e:`${e[0].toUpperCase()}${e.slice(1)}`).join("")}}t.CamelCase=o;class n{constructor(){this.nameMatchRegex=/^[A-Z]{1}[a-zA-Z0-9]+$/,this.name="pascal",this.convertWordsToClassName=e=>e.map(e=>`${e[0].toUpperCase()}${e.slice(1)}`).join("")}}t.PascalCase=n;class l{constructor(){this.nameMatchRegex=/.*/,this.name="any",this.convertWordsToClassName=e=>e.join()}}t.AnyCase=l,t.defaultClassNameProviders=[new s,new a,new i,new o,new n,new l]}]);
//# sourceMappingURL=extension.js.map